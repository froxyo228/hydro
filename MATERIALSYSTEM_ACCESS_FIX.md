# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ MaterialSystem

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–æ—Ç–∏–Ω—É" –ø–æ—è–≤–∏–ª–æ—Å—å 2541 –æ—à–∏–±–∫–∞:
```
Cannot call method "get_first_node_in_group" on a null value
```

## üîç **–ü—Ä–∏—á–∏–Ω–∞**
–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—ã—Ç–∞–ª–∏—Å—å –ø–æ–ª—É—á–∏—Ç—å `MaterialSystem` —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É:
```gdscript
var material_system = get_tree().get_first_node_in_group("material_system")
```

–ù–æ `MaterialSystem` –∫–∞–∫ –∞–≤—Ç–æ–ª–æ–∞–¥ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ—ç—Ç–æ–º—É `get_first_node_in_group()` –≤–æ–∑–≤—Ä–∞—â–∞–ª `null`.

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

–ó–∞–º–µ–Ω–∏–ª–∏ –æ–±—Ä–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É –Ω–∞ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∞–≤—Ç–æ–ª–æ–∞–¥—É:

### –ë—ã–ª–æ (–≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö):
```gdscript
var material_system = get_tree().get_first_node_in_group("material_system")
```

### –°—Ç–∞–ª–æ:
```gdscript
var material_system = get_node_or_null("/root/MaterialSystem")
```

## üìÅ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**

1. **`scripts/Dam.gd`** - 2 –º–µ—Å—Ç–∞ (initialize + update_visual_status)
2. **`scripts/AdvancedHUD.gd`** - setup_material_options
3. **`scripts/build/BuildController.gd`** - _ready
4. **`scripts/build/DamPreview.gd`** - update_preview_text  
5. **`scripts/debug/SystemDiagnostics.gd`** - check_materials

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ MaterialSystem –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–ª–æ–∞–¥ MaterialSystem —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü—Ä–µ–≤—å—é —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–æ—Ç–∏–Ω—É":
1. –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–µ–≤—å—é –ø–ª–æ—Ç–∏–Ω—ã
3. –î–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å
4. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ

---

**–ü—Ä–æ–±–ª–µ–º–∞ —Å 2541 –æ—à–∏–±–∫–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** üéâ
